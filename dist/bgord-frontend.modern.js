import e,{useState as n,useEffect as t,useRef as r,useLayoutEffect as o}from"react";function i(){const[e,r]=n({width:void 0,height:void 0});return t(()=>{function e(){r({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]),e}function a(e){var n;const t=i();return(null!=(n=null==t?void 0:t.width)?n:0)<=e}function s(){const[e,t]=n("");return{query:e,clear:function(){t("")},onChange:function(e){t(e.currentTarget.value)},filterFn:function(n){return""===e||(null==n?void 0:n.toLowerCase().includes(e.toLowerCase()))}}}var u,l;function c(e){const r=e.length-e.max,o=e.length>e.max;function i(){return o?u.contracted:u.expanded}const[a,s]=n(i);return t(()=>s(i()),[e.length,e.max]),{state:a,displayShowMore:a===u.contracted,displayShowLess:a===u.expanded&&o,showMore:function(){a===u.contracted&&s(u.expanded)},showLess:function(){a===u.expanded&&s(u.contracted)},numberOfExcessiveElements:r,filterFn:function(n,t){return a===u.expanded||t<e.max}}}function d(e){const[r,o]=n(e),i="function"==typeof e?e():e;return t(()=>{o(i)},[i]),{value:r,set:o,clear:function(){o(e)}}}function f(e){var t;const r=null!=(t=null==e?void 0:e.maxSize)?t:Infinity,[o,i]=n(l.idle),[a,s]=n(null),u={selectFile:function(e){const n=e.currentTarget.files;if(!n||!n[0])return;const t=n[0];if(t.size>r)return i(l.error);s(t),i(l.selected)},clearFile:function(){s(null),i(l.idle)}};return o===l.idle?{state:o,data:null,actions:u}:o===l.selected?{state:o,data:a,actions:u}:{state:o,data:null,actions:u}}function m(e,n){const o=r(n);return t(()=>{o.current=e}),o.current}function p(){}function v(e){var r,o,i;const a=null!=(r=e.defaultQuery)?r:void 0,s=null!=(o=e.filterFn)?o:function(e){return void 0===c||c===String(e)},u=Object.keys(e.enum),l=null!=(i=null==e?void 0:e.onUpdate)?i:p,[c,d]=n(a),f=m(c);return t(()=>{l(c,f)},[f,c]),{query:c,clear:function(){d(a)},onChange:function(n){const t=n.currentTarget.value,r=Boolean(e.enum[String(t)]);d(r?t:void 0)},filterFn:s,options:u,onUpdate:l}}function h(e){var t,r;const o=null!=(t=null==e?void 0:e.defaultItems)?t:[],i=null!=(r=null==e?void 0:e.comparisonFn)?r:(e,n)=>e===n,[a,s]=n(o);function u(e){s(n=>Array.isArray(e)?[...n,...e]:[...n,e])}function l(e){s(n=>n.filter(n=>!i(n,e)))}function c(e){return a.some(n=>i(n,e))}return[a,{clear:function(){s([])},add:u,remove:l,toggle:function(e){c(e)?l(e):u(e)},isAdded:c,update:s}]}function g(e=!0){o(()=>{if(!e)return;const n=document.querySelector("html"),t=document.body,r=window.getComputedStyle(t).overflow,o=window.getComputedStyle(n).overflow;return t.style.overflow="hidden",n.style.overflow="hidden",()=>{t.style.overflow=r,n.style.overflow=o}},[e])}function w(e=!1){const[t,r]=n(e);return{on:t,off:!t,enable:()=>r(!0),disable:()=>r(!1),toggle:()=>r(e=>!e)}}function y(){return y=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},y.apply(this,arguments)}function b(e,n){if(null==e)return{};var t,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n.indexOf(t=i[r])>=0||(o[t]=e[t]);return o}function S(){if("undefined"!=typeof window)return window}function x(e){var n;const t=S(),r=null!=(n=new URLSearchParams(null==t?void 0:t.location.search).get(e.label))?n:void 0;return v(y({onUpdate:(n,r)=>{if(!t)return;const o=new URL(t.location.toString()),i=new URLSearchParams(o.search);void 0===n?i.delete(e.label):i.set(e.label,n),n!==r&&n!==r&&(o.search=i.toString(),history.pushState({},"",o.toString()))}},e,{defaultQuery:null!=r?r:e.defaultQuery}))}!function(e){e.contracted="contracted",e.expanded="expanded"}(u||(u={})),function(e){e.idle="idle",e.selected="selected",e.error="error"}(l||(l={}));const E=["as"];function C(n){const{as:t}=n,r=b(n,E);return e.createElement(t||"a",y({target:"_blank",rel:"noreferer noopener"},r))}const O=e.createContext(void 0);function F(n){const[t,r]=function(){var e;const t=null!=(e=null==n?void 0:n.timeout)?e:5e3,[r,o]=h({comparisonFn:(e,n)=>e.id===n.id});return[[...r].reverse(),{add:function(e){const n=y({},e,{id:String(Date.now())});o.add(n),setTimeout(()=>o.remove(n),t)},remove:o.remove,clear:o.clear}]}();return e.createElement(O.Provider,{value:[t,r]},n.children)}function L(){const n=e.useContext(O);if(void 0===n)throw new Error("useToasts must be used within the ToastsContextProvider");return n}function T(){const[,e]=L();return e.add}const j=e.createContext({});function P(n){return e.createElement(j.Provider,{value:n.translations},n.children)}function k(){const n=e.useContext(j);if(void 0===n)throw new Error("useTranslations must be used within the TranslationsContext");return function(e){const t=n[e];return t||console.warn(`[@bgord/frontend] missing translation for key ${e}.`),null!=t?t:e}}const U=["children"];var I;function z(n){var t;const r=null!=(t=n.duration)?t:300,[o,i]=e.useState(function(){return n.visible?n.isInitial?I.appeared:I.appearing:I.hidden}),a=m(o);return e.useEffect(()=>{if(!n.isInitial)if(n.visible)i(I.appearing),setTimeout(()=>i(I.appeared),100);else{if(!a)return;i(I.hidding),setTimeout(()=>i(I.hidden),r)}},[n.visible]),o===I.hidden?null:e.cloneElement(n.children,{"data-anima":o,"data-anima-effect":n.effect,style:y({"--duration":`${r}ms`},n.children.props.style)})}function R(e){return{"data-anima":e["data-anima"],"data-anima-effect":e["data-anima-effect"],style:e.style}}function $(n){const t=b(n,U),[r,o]=e.useState(!0);return e.useEffect(()=>o(!1),[]),e.createElement("ul",y({},t),n.children.map(n=>e.cloneElement(n,{isInitial:r})))}function q(n,t){var r;const o=null!=(r=null==t?void 0:t.direction)?r:"head",[i,a]=e.useState(n.map(e=>({item:e,props:{visible:!0}})));let s=[];for(const e of n)!i.map(e=>e.item).some(n=>e.id===n.id)&&s.push(e);e.useEffect(()=>{0!==s.length&&(a("head"===o?e=>[...s.map(e=>({item:e,props:{visible:!0}})),...e]:e=>[...e,...s.map(e=>({item:e,props:{visible:!0}}))]),s=[])},[s.length,o]);let u=[];for(const{item:e}of i)n.every(n=>n.id!==e.id)&&u.push(e);return e.useEffect(()=>{0!==u.length&&(a(e=>e.map(e=>u.some(n=>n.id===e.item.id)?y({},e,{props:{visible:!1}}):e)),u=[])},[u.length]),{items:i.map(e=>{const t=n.find(n=>n.id===e.item.id);return t?y({},e,{item:t}):e}),count:i.filter(e=>e.props.visible).length}}!function(e){e.appearing="appearing",e.appeared="appeared",e.hidding="hidding",e.hidden="hidden"}(I||(I={}));class A{constructor(e,n){this.value=void 0;const t=new URLSearchParams(this.getNonEmptyFilters(n));this.value=""!==t.toString()?`${e}?${t.toString()}`:e}getNonEmptyFilters(e){return void 0===e?{}:Object.fromEntries(Object.entries(e).filter(([e,n])=>void 0!==n))}}class Q{constructor(e){this.message=void 0,this._known=!0,this.message=e.message}static isServerError(e){return!!(e&&"object"==typeof e&&e===Object(e)&&e.hasOwnProperty("_known")&&e.hasOwnProperty("message"))}static async extract(e){if(e.ok)return e;const n=await e.json(),t=Q.isServerError(n)?n.message:"app.error.general";throw new Q({message:t})}static async handle(e){throw new Q({message:Q.isServerError(e)?e.message:"app.error.general"})}}export{z as Anima,$ as AnimaList,I as AnimaState,A as FilterUrl,C as OutboundLink,Q as ServerError,F as ToastsContextProvider,P as TranslationsContextProvider,u as UseExpandableListState,l as UseFileState,R as getAnimaProps,S as getSafeWindow,p as noop,q as useAnimaList,a as useBreakpoint,s as useClientSearch,c as useExpandableList,d as useField,f as useFile,v as useFilter,h as useList,m as usePreviousValue,g as useScrollLock,T as useToastTrigger,L as useToastsContext,w as useToggle,k as useTranslations,x as useUrlFilter,i as useWindowDimensions};
//# sourceMappingURL=bgord-frontend.modern.js.map
