import*as n from"react";import e,{useRef as t,useEffect as r,useState as o,useLayoutEffect as i}from"react";import u from"tinykeys";function a(){return a=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},a.apply(this,arguments)}function c(n,e){if(null==n)return{};var t,r,o={},i=Object.keys(n);for(r=0;r<i.length;r++)e.indexOf(t=i[r])>=0||(o[t]=n[t]);return o}function l(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function s(n,e){var t="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(t)return(t=t.call(n)).next.bind(t);if(Array.isArray(n)||(t=function(n,e){if(n){if("string"==typeof n)return l(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?l(n,e):void 0}}(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var r=0;return function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(n,e){var o=t(e);return r(function(){o.current=n}),o.current}var d,v=["children"];function m(n){var t,r=null!=(t=n.duration)?t:300,o=e.useState(function(){return n.visible?n.isInitial?d.appeared:d.appearing:d.hidden}),i=o[0],u=o[1],c=f(i);return e.useEffect(function(){if(!n.isInitial)if(n.visible)u(d.appearing),setTimeout(function(){return u(d.appeared)},100);else{if(!c)return;u(d.hidding),setTimeout(function(){return u(d.hidden)},r)}},[n.visible]),i===d.hidden?null:e.cloneElement(n.children,{"data-anima":i,"data-anima-effect":n.effect,style:a({"--duration":r+"ms"},n.children.props.style)})}function p(n){return{"data-anima":n["data-anima"],"data-anima-effect":n["data-anima-effect"],style:n.style}}function h(n){var t=c(n,v),r=e.useState(!0),o=r[0],i=r[1];return e.useEffect(function(){return i(!1)},[]),e.createElement("ul",a({},t),n.children.map(function(n){return e.cloneElement(n,{isInitial:o})}))}function g(n,t){for(var r,o,i=null!=(r=null==t?void 0:t.direction)?r:"head",u=e.useState(n.map(function(n){return{item:n,props:{visible:!0}}})),c=u[0],l=u[1],f=[],d=function(){var n=o.value;!c.map(function(n){return n.item}).some(function(e){return n.id===e.id})&&f.push(n)},v=s(n);!(o=v()).done;)d();e.useEffect(function(){0!==f.length&&(l("head"===i?function(n){return[].concat(f.map(function(n){return{item:n,props:{visible:!0}}}),n)}:function(n){return[].concat(n,f.map(function(n){return{item:n,props:{visible:!0}}}))}),f=[])},[f.length,i]);for(var m,p=[],h=function(){var e=m.value.item;n.every(function(n){return n.id!==e.id})&&p.push(e)},g=s(c);!(m=g()).done;)h();return e.useEffect(function(){0!==p.length&&(l(function(n){return n.map(function(n){return p.some(function(e){return e.id===n.item.id})?a({},n,{props:{visible:!1}}):n})}),p=[])},[p.length]),{items:c.map(function(e){var t=n.find(function(n){return n.id===e.item.id});return t?a({},e,{item:t}):e}),count:c.filter(function(n){return n.props.visible}).length}}!function(n){n.appearing="appearing",n.appeared="appeared",n.hidding="hidding",n.hidden="hidden"}(d||(d={}));var w=/*#__PURE__*/function(){function n(){}return n.format=function(n){var e=Math.floor(n/60),t=n%60;return String(e).padStart(2,"0")+":"+String(t).padStart(2,"0")},n}();function y(n,e){var t="function"==typeof e?e():e,r=o(t),i=r[1];return{value:r[0],set:i,clear:function(){i(t)},label:{props:{htmlFor:n}},input:{props:{id:n,name:n}}}}var b=1;function S(e){var t=n.useState("initial"),r=t[0],o=t[1],i=n.useRef(null),u=y("duration",0),a=y("currentTime",0),c=y("volume",1),l=0===c.value,s=0===u.value?0:Math.round(a.value/u.value*100);function f(n){var e=n.currentTarget;i.current&&(i.current.currentTime=e.valueAsNumber,a.set(e.valueAsNumber))}function d(n){var e=n.currentTarget;i.current&&(i.current.volume=e.valueAsNumber,c.set(e.valueAsNumber))}return{props:{audio:{src:e,onTimeUpdate:function(n){a.set(Math.round(n.target.currentTime))},onLoadedMetadata:function(n){var e=n.currentTarget;i.current=e,u.set(Math.round(e.duration)),a.set(e.currentTime),c.set(e.volume),o("ready")},onEnded:function(){o("paused")},controls:!1},player:{min:0,step:1,max:u.value,value:a.value,onInput:f,style:{"--percentage":s+"%"}},volume:{min:0,max:1,value:c.value,onInput:d,style:{"--percentage":Math.floor(100*c.value)+"%"}}},actions:{play:function(){i.current&&(i.current.play(),o("playing"))},pause:function(){i.current&&(i.current.pause(),o("paused"))},mute:function(){i.current&&(i.current.volume=0,c.set(0))},unmute:function(){i.current&&(i.current.volume=1,c.set(1))},reset:function(){i.current&&(i.current.currentTime=0,i.current.pause(),a.set(0),o("paused"))},seek:f,changeVolume:d},meta:{state:r,percentage:{raw:s,formatted:s+"%"},currentTime:{raw:a.value,formatted:w.format(a.value)},duration:{raw:u.value,formatted:w.format(u.value)},volume:{value:c.value,raw:Math.floor(100*c.value),formatted:Math.floor(100*c.value)+"%"},muted:l}}}function E(n){e.useEffect(function(){var e;n.condition&&(null==(e=n.ref.current)||e.focus())},[n.condition])}function T(){if("undefined"!=typeof window)return window}function x(){var n=o({width:void 0,height:void 0}),e=n[0],t=n[1];return r(function(){var n=T();if(n)return n.addEventListener("resize",e),e(),function(){return n.removeEventListener("resize",e)};function e(){t({width:null==n?void 0:n.innerWidth,height:null==n?void 0:n.innerHeight})}},[]),e}function L(n){var e,t=x();return(null!=(e=null==t?void 0:t.width)?e:0)<=n}function M(n,t,r){e.useEffect(function(){if(n.current)return document.addEventListener("mousedown",e),function(){return document.removeEventListener("mousedown",e)};function e(e){var o;null!=(o=n.current)&&o.contains(e.target)||(null==r?void 0:r.some(function(n){var t;return null==(t=n.current)?void 0:t.contains(e.target)}))||t()}},[t,n,r])}function I(){var n=o(""),e=n[0],t=n[1];return{query:e,clear:function(){t("")},onChange:function(n){t(n.currentTarget.value)},filterFn:function(n){return""===e||(null==n?void 0:n.toLowerCase().includes(e.toLowerCase()))}}}var C=/*#__PURE__*/function(){function n(n){this.value=void 0,this.value=n}var e=n.prototype;return e.toHours=function(){return this.value*n.hours},e.toMinutes=function(){return this.value*n.minutes},e.toSeconds=function(){return this.value*n.seconds},e.toMs=function(){return this.value*n.ms},n}();C.hours=24,C.minutes=1440,C.seconds=86400,C.ms=864e5;var P=/*#__PURE__*/function(){function n(n){this.value=void 0,this.value=n}var e=n.prototype;return e.toMinutes=function(){return this.value*n.minutes},e.toSeconds=function(){return this.value*n.seconds},e.toMs=function(){return this.value*n.ms},n}();P.minutes=60,P.seconds=3600,P.ms=36e5;var O=/*#__PURE__*/function(){function n(n){this.value=void 0,this.value=n}var e=n.prototype;return e.toSeconds=function(){return this.value*n.seconds},e.toMs=function(){return this.value*n.ms},n}();O.seconds=60,O.ms=6e4;var j=/*#__PURE__*/function(){function n(n){this.value=void 0,this.value=n}return n.prototype.toMs=function(){return this.value*n.ms},n}();j.ms=1e3;var F,_,k=/*#__PURE__*/function(){function n(n){this.value=void 0,this.value=n}return n.prototype.toMs=function(){return this.value},n}(),A={Days:C,Hours:P,Minutes:O,Seconds:j};function U(){return Date.now()}function D(){var n=o(U),e=n[0],t=n[1];return r(function(){var n=setInterval(function(){return t(U())},new A.Seconds(1).toMs());return function(){return clearInterval(n)}},[]),e}function R(n){void 0===n&&(n=!0),i(function(){if(n){var e=document.querySelector("html"),t=document.body,r=window.getComputedStyle(e).overscrollBehavior,o=window.getComputedStyle(t).overscrollBehavior;return t.style.overscrollBehavior="none",e.style.overscrollBehavior="none",function(){t.style.overscrollBehavior=o,e.style.overscrollBehavior=r}}},[n])}function B(n){e.useEffect(function(){document.title=n},[n])}function H(n){var e=n.length-n.max,t=n.length>n.max;function i(){return t?F.contracted:F.expanded}var u=o(i),a=u[0],c=u[1];return r(function(){return c(i())},[n.length,n.max]),{state:a,displayShowMore:a===F.contracted,displayShowLess:a===F.expanded&&t,showMore:function(){a===F.contracted&&c(F.expanded)},showLess:function(){a===F.expanded&&c(F.contracted)},numberOfExcessiveElements:e,filterFn:function(e,t){return a===F.expanded||t<n.max}}}function N(n){var e,t=null!=(e=null==n?void 0:n.maxSize)?e:Infinity,r=o(_.idle),i=r[0],u=r[1],a=o(null),c=a[0],l=a[1];function s(n){var e=n.currentTarget.files;if(e&&e[0]){var r=e[0];if(!(r.size>t))return l(r),u(_.selected),r;u(_.error)}}function f(){l(null),u(_.idle)}return i===_.idle?{state:i,data:null,actions:{selectFile:s,clearFile:f}}:i===_.selected?{state:i,data:c,actions:{selectFile:s,clearFile:f,previewFile:function(){if(c)return URL.createObjectURL(c)}}}:{state:i,data:null,actions:{selectFile:s,clearFile:f}}}function z(){}function Q(n){var e,t,i,u,a=null!=(e=n.defaultQuery)?e:void 0,c=null!=(t=n.currentQuery)?t:void 0,l=null!=(i=n.filterFn)?i:function(n){return void 0===m||m===String(n)},s=Object.keys(n.enum),d=null!=(u=null==n?void 0:n.onUpdate)?u:z,v=o(null!=c?c:a),m=v[0],p=v[1],h=f(m);return r(function(){d(m,h)},[h,m]),{query:m,clear:function(){p(a)},onChange:function(e){var t=e.currentTarget.value,r=Boolean(n.enum[String(t)]);p(r?t:void 0)},filterFn:l,options:s,onUpdate:d,label:n.label}}!function(n){n.contracted="contracted",n.expanded="expanded"}(F||(F={})),function(n){n.idle="idle",n.selected="selected",n.error="error"}(_||(_={}));var q=function(n){try{if(!n)return Promise.resolve(Y);var e=document.createElement("img"),t=new Promise(function(n,t){e.onload=function(){return n({width:e.width,height:e.height})},e.onerror=t});return e.src=n,Promise.resolve(t)}catch(n){return Promise.reject(n)}},Y={width:null,height:null};function V(e){var t,r=y("resolution",Y);return n.useEffect(function(){!function(){try{var n,t=function(t){if(n)return t;[_.error,_.idle].includes(e.state)&&null!==r.value.width&&null!==r.value.height&&r.clear()},o=function(){if(e.state===_.selected)return function(t,o){try{var i=Promise.resolve(q(e.actions.previewFile())).then(function(e){var t=r.set(e);return n=1,t})}catch(n){return o()}return i&&i.then?i.then(void 0,o):i}(0,function(){var e=r.clear();return n=1,e})}();Promise.resolve(o&&o.then?o.then(t):t(o))}catch(n){return Promise.reject(n)}}()},[e.state,null==(t=e.data)?void 0:t.name]),r.value}function W(n){void 0===n&&(n=!1);var e=o(n),t=e[0],r=e[1];return{on:t,off:!t,enable:function(){return r(!0)},disable:function(){return r(!1)},toggle:function(){return r(function(n){return!n})}}}var $=function(){var n=W("undefined"==typeof navigator||"boolean"!=typeof navigator.onLine||navigator.onLine);return e.useEffect(function(){function e(){n.enable()}function t(){n.disable()}return window.addEventListener("online",e),window.addEventListener("offline",t),function(){window.removeEventListener("online",e),window.removeEventListener("offline",t)}},[]),n.on},G={threshold:0,root:null,rootMargin:"0%",ref:{current:null}};function J(){return"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype}function K(n){void 0===n&&(n=G);var e=o(!1),t=e[0],i=e[1];return r(function(){var e=n.ref.current;if(J()&&e){var t=new IntersectionObserver(function(n){var e;return i(Boolean(null==(e=n[0])?void 0:e.isIntersecting))},n);return t.observe(e),function(){return t.unobserve(e)}}},[]),t}function X(n){e.useEffect(function(){var e=u(window,n);return function(){return e()}},[n])}function Z(n){void 0===n&&(n=!1),e.useEffect(function(){if(n)return window.addEventListener("beforeunload",e),function(){return window.removeEventListener("beforeunload",e)};function e(n){n.preventDefault()}},[n])}function nn(n){var e,t,r=null!=(e=null==n?void 0:n.defaultItems)?e:[],i=null!=(t=null==n?void 0:n.comparisonFn)?t:function(n,e){return n===e},u=o(r),a=u[0],c=u[1];function l(n){c(function(e){return Array.isArray(n)?[].concat(e,n):[].concat(e,[n])})}function s(n){c(function(e){return e.filter(function(e){return!i(e,n)})})}function f(n){return a.some(function(e){return i(e,n)})}return[a,{clear:function(){c([])},add:l,remove:s,toggle:function(n){f(n)?s(n):l(n)},isAdded:f,update:c}]}var en=/*#__PURE__*/function(){function n(n){this.lastInvocationTimestamp=null,this.options=void 0,this.options=n}return n.prototype.verify=function(n){if(!this.lastInvocationTimestamp)return this.lastInvocationTimestamp=n,{allowed:!0};var e=this.lastInvocationTimestamp+this.options.limitMs;return e<=n?(this.lastInvocationTimestamp=n,{allowed:!0}):{allowed:!1,remainingMs:e-n}},n}();function tn(n){var e=t(new en(n));return function(){var t=Date.now(),r=e.current.verify(t);return r.allowed?n.action():null==n.fallback?void 0:n.fallback(r.remainingMs)}}function rn(){var n=T(),t=e.useState(0),r=t[0],o=t[1],i=W(!1);return e.useLayoutEffect(function(){function e(){n&&(o(null==n?void 0:n.scrollY),n.document.body.clientHeight<n.document.body.scrollHeight?i.enable():i.disable())}return null==n||n.addEventListener("scroll",e),function(){return null==n?void 0:n.removeEventListener("scroll",e)}},[]),{actions:{goToTop:function(){n&&n.scrollTo({top:0,left:0,behavior:"smooth"})}},position:{value:r,isInitial:0===r,hasChanged:r>0},visible:i.on,hidden:i.off}}function on(n){void 0===n&&(n=!0),i(function(){if(n){var e=document.querySelector("html"),t=document.body,r=window.getComputedStyle(t).overflow,o=window.getComputedStyle(e).overflow;return t.style.overflow="hidden",e.style.overflow="hidden",function(){t.style.overflow=r,e.style.overflow=o}}},[n])}function un(n){var e=new Audio(n);return{play:e.play.bind(e)}}function an(n){var e,t=T(),r=null!=(e=new URLSearchParams(null==t?void 0:t.location.search).get(n.label))?e:void 0;return Q(a({onUpdate:function(e,r){if(t){var o=new URL(t.location.toString()),i=new URLSearchParams(o.search);void 0===e?i.delete(n.label):i.set(n.label,e),e!==r&&e!==r&&(o.search=i.toString(),history.pushState({},"",o.toString()))}}},n,{defaultQuery:n.defaultQuery,currentQuery:r}))}var cn=["disable","enable","on","off","toggle"];function ln(n){var t=n.disable,r=c(n,cn),o=e.useRef(null);return e.useEffect(function(){var e,t;n.on?null==(e=o.current)||e.showModal():null==(t=o.current)||t.close()},[n.on]),X({Escape:t}),E({ref:o,condition:n.on}),on(n.on),e.createElement("dialog",a({ref:o,tabIndex:0,"data-display":n.on?"flex":"none","data-direction":"column","data-mx":"auto","data-p":"24","data-position":"absolute","data-z":"2","data-bg":"white","data-br":"4","data-bc":"gray-300","data-bw":"1","data-backdrop":"black"},r))}function sn(n){return $()?null:e.createElement(e.Fragment,null,n.children)}var fn=["as"];function dn(n){var t=n.as,r=c(n,fn);return e.createElement(t||"a",a({target:"_blank",rel:"noreferer noopener"},r))}var vn=function(n){try{var e,t,r=null!=(e=n.onFailure)?e:mn,o=null!=(t=n.onSuccess)?t:z;navigator.clipboard||r();var i=function(e,t){try{var r=Promise.resolve(navigator.clipboard.writeText(n.text)).then(function(){o()})}catch(n){return t(n)}return r&&r.then?r.then(void 0,t):r}(0,function(n){r(n)});return Promise.resolve(i&&i.then?i.then(function(){}):void 0)}catch(n){return Promise.reject(n)}},mn=function(n){return console.warn("Copying to clipboard not supported")},pn=/*#__PURE__*/function(){function n(){}return n.datetime=function(n,e){return void 0===e&&(e="N/A"),n?new Date(n).toLocaleString():e},n.form=function(e){return e?n._pad(e.getFullYear())+"-"+n._pad(e.getMonth()+1)+"-"+n._pad(e.getDate()):n.form(new Date)},n.clockUTC=function(e){var t=new Date(e);return n._pad(t.getUTCHours())+":"+n._pad(t.getUTCMinutes())+":"+n._pad(t.getUTCSeconds())},n.clockLocal=function(e){var t=new Date(e);return n._pad(t.getHours())+":"+n._pad(t.getMinutes())+":"+n._pad(t.getSeconds())},n.countdown=function(e){var t=new Date(e);return n._pad(t.getHours())+":"+n._pad(t.getMinutes())+":"+n._pad(t.getSeconds())},n._pad=function(n){return String(n).padStart(2,"0")},n}(),hn=/*#__PURE__*/function(){function n(n,e){this.value=void 0;var t=new URLSearchParams(this.getNonEmptyFilters(e));this.value=""!==t.toString()?n+"?"+t.toString():n}return n.prototype.getNonEmptyFilters=function(n){return void 0===n?{}:Object.fromEntries(Object.entries(n).filter(function(n){return void 0!==n[1]}))},n}();function gn(){return!T()}var wn=/*#__PURE__*/function(){function n(){}return n.extract=function(n){var e,t,r;return null!=(e=null==(t=n.data)||null==(r=t.pages)?void 0:r.flat().map(function(n){return n.result}).flat())?e:[]},n}();function yn(n){var e;if("en"!==n.language)return console.warn("[@bgord/frontend] missing pluralization fuction for language "+n.language+"."),n.singular;var t=null!=(e=n.plural)?e:n.singular+"s";return 1===n.value?n.singular:t}wn.empty={result:[],meta:{exhausted:!0}};var bn=/*#__PURE__*/function(){function n(n){this.message=void 0,this._known=!0,this.message=n.message}return n.isServerError=function(n){return!!(n&&"object"==typeof n&&n===Object(n)&&n.hasOwnProperty("_known")&&n.hasOwnProperty("message"))},n.extract=function(e){try{return e.ok?Promise.resolve(e):Promise.resolve(e.json()).then(function(e){var t=n.isServerError(e)?e.message:"app.error.general";throw new n({message:t})})}catch(n){return Promise.reject(n)}},n.handle=function(e){try{throw new n({message:n.isServerError(e)?e.message:"app.error.general"})}catch(n){return Promise.reject(n)}},n}(),Sn=e.createContext(void 0);function En(n){var t,r,o,i,u=(r=null!=(t=null==n?void 0:n.timeout)?t:5e3,o=nn({comparisonFn:function(n,e){return n.id===e.id}}),i=o[1],[[].concat(o[0]).reverse(),{add:function(n){var e=a({},n,{id:String(Date.now())});i.add(e),setTimeout(function(){return i.remove(e)},r)},remove:i.remove,clear:i.clear}]);return e.createElement(Sn.Provider,{value:[u[0],u[1]]},n.children)}function Tn(){var n=e.useContext(Sn);if(void 0===n)throw new Error("useToasts must be used within the ToastsContextProvider");return n}function xn(){return Tn()[1].add}var Ln=e.createContext({translations:{},language:"en"});function Mn(n){return e.createElement(Ln.Provider,{value:n.value},n.children)}function In(){var n=e.useContext(Ln);if(void 0===n)throw new Error("useTranslations must be used within the TranslationsContext");return function(e,t){var r=n.translations[e];return r?t?Object.entries(t).reduce(function(n,e){return n.replace("{{"+e[0]+"}}",String(e[1]))},r):r:(console.warn("[@bgord/frontend] missing translation for key: "+e),e)}}function Cn(){var n=e.useContext(Ln);if(void 0===n)throw new Error("useLanguage must be used within the TranslationsContext");return n.language}function Pn(){var n=Cn();return function(e){return yn(a({},e,{language:n}))}}export{b as AUDIO_DEFAULT_VOLUME,m as Anima,h as AnimaList,d as AnimaState,pn as DateFormatter,C as Days,ln as Dialog,w as DurationFormatter,hn as FilterUrl,P as Hours,k as MiliSeconds,O as Minutes,sn as OfflineIndicator,dn as OutboundLink,wn as Pagination,j as Seconds,bn as ServerError,A as Time,En as ToastsContextProvider,Mn as TranslationsContextProvider,F as UseExpandableListState,_ as UseFileState,vn as copyToClipboard,G as defaultUseIsVisibleConfig,Y as emptyImageResolution,p as getAnimaProps,U as getCurrentTimestamp,q as getImageResolution,T as getSafeWindow,gn as isClient,J as isIntersectionObserverSupported,z as noop,yn as pluralize,g as useAnimaList,S as useAudio,E as useAutofocus,L as useBreakpoint,M as useClickOutside,I as useClientSearch,D as useCurrentTimestamp,R as useDisablePullToRefresh,B as useDocumentTitle,H as useExpandableList,y as useField,N as useFile,Q as useFilter,V as useImageFileResolution,$ as useIsOnline,K as useIsVisible,X as useKeyboardShortcurts,Cn as useLanguage,Z as useLeavingPrompt,nn as useList,Pn as usePluralize,f as usePreviousValue,tn as useRateLimiter,rn as useScroll,on as useScrollLock,un as useSound,xn as useToastTrigger,Tn as useToastsContext,W as useToggle,In as useTranslations,an as useUrlFilter,x as useWindowDimensions};
//# sourceMappingURL=bgord-frontend.module.js.map
